# リバースプロキシ
#Internet

## そもそもプロキシとは
多くはフォワードプロキシを指す。

標準のインターネットでは、クライアントAが直接配信元サーバーCにリクエストを送信し、Cが応答する。
これに対しプロキシBを設置することで、AはBにリクエストを送り、BがCにリクエストを転送する。

フォワードプロキシのメリットとしては以下の点が考えられる。
- 閲覧制限を回避する
	- 閲覧制限などのファイアウォールは、送信先サーバに応じて適用されていることが多い。一方フォワードプロキシを挟むことで、クライアントの送信先はあくまでプロキシになるのでこれを回避できる
- アクセスブロックを実現する
	- 上記と逆にプロキシサーバを挟むことで、コンテンツフィルタが可能になる
- 身元を保護し、セキュリティ性を向上させる
	- Webサイトにプロキシを介すことで、送信先IPアドレスの秘匿性が向上する

## リバースプロキシとは
Webサイト(とは限らないけど)と訪問者の間に存在し、クライアントからのリクエストをそれらのサーバに転送するサーバを指す。フォワードプロキシとは逆に、クライアントからのリクエストを傍受するサーバを指す(ため、「リバース」と称される)。

リバースプロキシのメリットとしては以下の点が考えられる。
- 負荷分散
	- 配信元サーバを異なるサーバプールに属させ、リクエストの均等分散をリバプロが担う。
- 攻撃からの保護
	- 配信元サーバのIPアドレスを秘匿できるため、(リバプロが耐えられる限り)DDoS攻撃に強くなる。
- キャッシュ
	- リバプロもプロキシ。
- SSL暗号化
	- 通信の暗号化と復号処理をリバプロが担うことで、配信元サーバの負荷を軽減する。

## 余談：Cloudflare が死ぬと nginx 500 Error が返るわけ
結論：Webサーバーのnginxが死んでいるのではなく、リバプロのサーバーが死んでる。

## 参考
- [リバースプロキシとは？|プロキシサーバーの説明 | Cloudflare](https://www.cloudflare.com/ja-jp/learning/cdn/glossary/reverse-proxy/)
